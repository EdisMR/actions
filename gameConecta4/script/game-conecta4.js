for(var formulario=document.forms[0],camposGrid=document.querySelectorAll(".grid-container div"),innerTurnDiv=document.querySelector(".innerTurnUser span"),innerTurnDivParent=document.querySelector(".innerTurnUser"),buttonResetParent=document.querySelector(".buttonReset"),buttonReset=document.querySelector(".buttonReset button"),gameHorizontal=7,gameVertical=6,matrizGame=new Array(gameHorizontal),i=0;i<gameHorizontal;i++)matrizGame[i]=new Array(gameVertical);for(var contadorCamposGrid=0,Y=0;Y<gameVertical;Y++)for(var X=0;X<gameHorizontal;X++){matrizGame[X][Y]=camposGrid[contadorCamposGrid];var n="columna"+(X+1);camposGrid[contadorCamposGrid].classList.add(n),camposGrid[contadorCamposGrid].dataset.posx=X,camposGrid[contadorCamposGrid].dataset.posy=Y,contadorCamposGrid++}var users={user1:"",user2:"",winner:"",icon:"ms-Icon--CircleFill",turno:1};function retornaClaseUser(){var e;return 0==users.turno&&(e="user1"),1==users.turno&&(e="user2"),e}function defineUsers(r){return e=r,e.preventDefault(),formulario.user1.value!=formulario.user2.value&&(formulario.removeEventListener("submit",defineUsers,!1),users.user1=formulario.user1.value,users.user2=formulario.user2.value,afterDefineUsers()),!1}function afterDefineUsers(){document.querySelector(".definirJugadores").classList.add("d-none"),document.querySelector(".game-container").classList.remove("d-none"),innerTurnDivParent.classList.remove("d-none"),camposGrid.forEach((function(e){e.addEventListener("mouseover",addHoverGrid),e.addEventListener("mouseleave",removeHoverGrid),e.addEventListener("click",divCLicked)})),innerTurnUser()}function removeListerDivs(){camposGrid.forEach((function(e){e.removeEventListener("mouseover",addHoverGrid),e.removeEventListener("mouseleave",removeHoverGrid),e.removeEventListener("click",divCLicked)}))}function addHoverGrid(e){var r;try{r=this.classList[0]}catch(n){r=e.classList[0]}document.querySelectorAll("."+r).forEach((function(e){e.classList.add("divHover")}))}function removeHoverGrid(e){var r;try{r=this.classList[0]}catch(n){r=e.classList[0]}document.querySelectorAll("."+r).forEach((function(e){e.classList.remove("divHover")}))}function divCLicked(e){var r;llenarElemento(r=defineUltimoElementoVacio(this)),evaluarGanador(r)?(buttonResetParent.classList.remove("d-none"),ganadorEncontrado(),removeListerDivs(),removeHoverGrid(r)):(switchUser(),innerTurnUser())}function switchUser(){0==users.turno?users.turno=1:users.turno=0}function llenarElemento(e){var r=e;r.children[0].classList.add(users.icon),r.classList.add(retornaClaseUser()),r.children[0].dataset.occupied="true"}function innerTurnUser(){1==users.turno?innerTurnDiv.innerHTML=users.user1:innerTurnDiv.innerHTML=users.user2,animateInnerUser()}function animateInnerUser(){innerTurnDivParent.classList.add("innerTurnUserAnimation")}function afterAnimateInnerUser(){innerTurnDivParent.classList.remove("innerTurnUserAnimation")}function defineUltimoElementoVacio(e){for(var r,n=e,a=gameVertical-1;a>=0;a--)if("false"==matrizGame[n.dataset.posx][a].children[0].dataset.occupied){r=matrizGame[n.dataset.posx][a];break}return r}function evaluarGanador(e){var r=!1,n=parseInt(e.dataset.posx),a=parseInt(e.dataset.posy);return 0==r&&1==buscarClaseEnReferencia(n+1,a)&&1==buscarClaseEnReferencia(n+2,a)&&1==buscarClaseEnReferencia(n+3,a)&&(r=!0),0==r&&1==buscarClaseEnReferencia(n-1,a)&&1==buscarClaseEnReferencia(n+1,a)&&1==buscarClaseEnReferencia(n+2,a)&&(r=!0),0==r&&1==buscarClaseEnReferencia(n-2,a)&&1==buscarClaseEnReferencia(n-1,a)&&1==buscarClaseEnReferencia(n+1,a)&&(r=!0),0==r&&1==buscarClaseEnReferencia(n-1,a)&&1==buscarClaseEnReferencia(n-2,a)&&1==buscarClaseEnReferencia(n-3,a)&&(r=!0),0==r&&1==buscarClaseEnReferencia(n,a+1)&&1==buscarClaseEnReferencia(n,a+2)&&1==buscarClaseEnReferencia(n,a+3)&&(r=!0),0==r&&1==buscarClaseEnReferencia(n,a-1)&&1==buscarClaseEnReferencia(n,a+1)&&1==buscarClaseEnReferencia(n,a+2)&&(r=!0),0==r&&1==buscarClaseEnReferencia(n,a-2)&&1==buscarClaseEnReferencia(n,a-1)&&1==buscarClaseEnReferencia(n,a+1)&&(r=!0),0==r&&1==buscarClaseEnReferencia(n,a-1)&&1==buscarClaseEnReferencia(n,a-2)&&1==buscarClaseEnReferencia(n,a-3)&&(r=!0),0==r&&buscarClaseEnReferencia(n+1,a-1)&&buscarClaseEnReferencia(n+2,a-2)&&buscarClaseEnReferencia(n+3,a-3)&&(r=!0),0==r&&buscarClaseEnReferencia(n-1,a+1)&&buscarClaseEnReferencia(n+1,a-1)&&buscarClaseEnReferencia(n+2,a-2)&&(r=!0),0==r&&buscarClaseEnReferencia(n-2,a+2)&&buscarClaseEnReferencia(n-1,a+1)&&buscarClaseEnReferencia(n+1,a-1)&&(r=!0),0==r&&buscarClaseEnReferencia(n-1,a+1)&&buscarClaseEnReferencia(n-2,a+2)&&buscarClaseEnReferencia(n-3,a+3)&&(r=!0),0==r&&buscarClaseEnReferencia(n+1,a+1)&&buscarClaseEnReferencia(n+2,a+2)&&buscarClaseEnReferencia(n+3,a+3)&&(r=!0),0==r&&buscarClaseEnReferencia(n-1,a-1)&&buscarClaseEnReferencia(n+1,a+1)&&buscarClaseEnReferencia(n+2,a+2)&&(r=!0),0==r&&buscarClaseEnReferencia(n-1,a-1)&&buscarClaseEnReferencia(n-2,a-2)&&buscarClaseEnReferencia(n+1,a+1)&&(r=!0),0==r&&buscarClaseEnReferencia(n-1,a-1)&&buscarClaseEnReferencia(n-2,a-2)&&buscarClaseEnReferencia(n-3,a-3)&&(r=!0),r}function buscarClaseEnReferencia(e,r){var n=!1,a=!1;try{matrizGame[e][r].classList}catch(e){a=!0}0==a&&Array.from(matrizGame[e][r].classList).forEach((function(e){e==retornaClaseUser()&&(n=!0)}));return n}function ganadorEncontrado(){var e,r;1==users.turno&&(e=users.user1,r="hsl(60, 70%, 60%)"),0==users.turno&&(e=users.user2,r="hsl(0, 60%, 50%)"),innerTurnDivParent.style.backgroundColor=r,innerTurnDivParent.innerHTML="The winner is "+e}function resetGame(){buttonResetParent.classList.add("d-none"),camposGrid.forEach((function(e){e.classList.remove("user1"),e.classList.remove("user2"),e.children[0].classList.remove(users.icon),e.children[0].dataset.occupied="false"})),innerTurnDivParent.style.backgroundColor="initial",innerTurnDivParent.innerHTML="\n\t\t<div><span></span>'s shift</div>\n\t",innerTurnDiv=document.querySelector(".innerTurnUser span"),afterDefineUsers(),innerTurnUser()}buttonReset.addEventListener("click",resetGame),formulario.addEventListener("submit",defineUsers,!1),innerTurnDivParent.addEventListener("animationend",afterAnimateInnerUser,!1);