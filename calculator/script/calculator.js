var messages={error:"ERROR"},formulario=document.forms[0];formulario.addEventListener("submit",calculatorMainProcess,!1),formulario.addEventListener("reset",resetResult,!1);var inputTag=formulario.operationInput,inputValue="";inputTag.addEventListener("input",resetResult,!1);var resultInnerTag=document.getElementById("resultInner"),resultValue="";function calculatorMainProcess(e){e.preventDefault(),setInputValue();var r=inputValue,t=100;do{var a=determinateLastParenthesis(r),u=division(a);r=r.replace(a,u),t--}while(t>0&&r!=messages.error&&isNaN(Number(r)));resultValue=r,innerFinalResult()}function division(e){var r="",t=removeParenthesis(e).split("/");switch(t.length){case 1:isNaN(Number(t[0]))&&(r=resta(t[0])),isNaN(Number(t[0]))||(r=t[0]);break;case 2:if("0"==t[1]&&(r=messages.error),""==r&&t.some((function(e){return isNaN(Number(e))}))&&(t[0]=resta(t[0]),t[1]=resta(t[1])),""==r&&!isNaN(Number(t[0]))&&!isNaN(Number(t[1])))r=(Number(t[0])/Number(t[1])).toString();break;default:r=messages.error}return(""==r||t.length>=3)&&(r=messages.error),r}function resta(e){var r="",t=removeParenthesis(e).split("-");switch(t.length){case 1:isNaN(Number(t[0]))&&(r=suma(t[0])),isNaN(Number(t[0]))||(r=t[0]);break;case 2:if(t.some((function(e){return isNaN(Number(e))}))&&(t[0]=suma(t[0]),t[1]=suma(t[1])),t[0]==t[1]&&(r="0"),""==r&&!isNaN(Number(t[0]))&&!isNaN(Number(t[1])))r=(Number(t[0])-Number(t[1])).toString();break;default:r=""}if(t.length>=3){var a=t.map((function(e){return suma(e)}));if(a.every((function(e){return!isNaN(Number(e))}))){for(var u=Number(a[0]),n=1;n<=a.length;n++)u-=Number(a[n]);r=u.toString()}}return""==r&&(r=messages.error),r}function suma(e){var r="",t=removeParenthesis(e).split("+");switch(t.length){case 1:isNaN(Number(t[0]))&&(r=multiplicar(t[0])),isNaN(Number(t[0]))||(r=t[0]);break;case 2:if(t.some((function(e){return isNaN(Number(e))}))&&(t[0]=multiplicar(t[0]),t[1]=multiplicar(t[1])),""==r&&!isNaN(Number(t[0]))&&!isNaN(Number(t[1])))r=(Number(t[0])+Number(t[1])).toString();break;default:r=""}if(t.length>=3){var a=t.map((function(e){return multiplicar(e)}));if(a.every((function(e){return!isNaN(Number(e))}))){for(var u=Number(a[0]),n=1;n<=a.length;n++)u+=Number(a[n]);r=u.toString()}}return""==r&&(r=messages.error),r}function multiplicar(e){var r="",t=removeParenthesis(e).split("*");switch(t.length){case 1:isNaN(Number(t[0]))||(r=t[0]);break;case 2:if(!isNaN(Number(t[0]))&&!isNaN(Number(t[1])))r=(Number(t[0])*Number(t[1])).toString();break;default:r=""}if(t.length>=3&&t.every((function(e){return!isNaN(Number(e))}))){for(var a=Number(t[0]),u=1;u<=t.length;u++)a*=Number(t[u]);r=a.toString()}return""==r&&(r=messages.error),r}function setInputValue(){inputValue=inputTag.value}function resetResult(){resultValue="",resultInnerTag.innerText=""}function determinateLastParenthesis(e){var r="",t=e.lastIndexOf("("),a=e.indexOf(")",t);return""==(r=e.substring(t,a+1))&&(r=e),r}function removeParenthesis(e){var r=e.replace("(","");return r=r.replace(")","")}function innerFinalResult(){resultInnerTag.innerText=resultValue}